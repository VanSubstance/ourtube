<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper
	namespace = "com.my.spring.mapper.StatisticsMapper">
	
	<select 
	id = "getAverageChannelByCtgr"
	parameterType="com.my.spring.domain.statistics.ChannelDto"
	resultType="com.my.spring.domain.statistics.ChannelDto">
		select round(avg(viewcount)) viewCount, round(avg(videocount)) videoCount, 
		round(avg(subscount)) subsCount from channel, channelctgr A
		where A.ctgr = #{target.ctgr} and A.channelid = channel.id and channel.infodate = #{target.infoDate}
	</select>
	
</mapper>